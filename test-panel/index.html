<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Stok Yönetim Test Paneli (Frame ile Modüler)</title>
  <style>
    body { font-family: monospace; margin: 0; background: #f9f9f9; }
    .frames { display: flex; flex-direction: column; gap: 8px; margin: 12px; }
    iframe { border: 1px solid #bbb; min-width: 420px; min-height: 420px; background: #fff; width: 100%; }
    .title { font-size: 20px; margin: 16px; }
  </style>
</head>
<body>
  <div class="title">Stok Yönetim Test Paneli (Frame ile Modüler)</div>
  <div class="frames">
    <iframe src="login-frame.html" title="Giriş"></iframe>
    <iframe src="firms-frame.html" title="Firma"></iframe>
    <iframe src="store-frame.html" title="Mağaza"></iframe>
    <iframe src="user-frame.html" title="Kullanıcı"></iframe>
    <iframe src="product-frame.html" title="Ürün"></iframe>
    <iframe src="customer-frame.html" title="Müşteri"></iframe>
    <iframe src="sale-frame.html" title="Satış"></iframe>
  </div>
  <script>
    // Frame yenileme: src'yi tekrar atamak kesin çalışır.
    window.addEventListener('message', function(e) {
      if (e.data && e.data.type === 'setJwtToken' && e.data.token) {
        localStorage.setItem('jwt_token', e.data.token);
      }
      if (e.data && e.data.type === 'loginSuccess') {
        document.querySelectorAll('iframe').forEach(f => {
          f.src = f.src;
        });
      }
    });
  </script>
</body>
</html>